{"remainingRequest":"C:\\Users\\joneb\\Documents\\GitHub\\cool-website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\joneb\\Documents\\GitHub\\cool-website\\src\\components\\AdminUsers.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\joneb\\Documents\\GitHub\\cool-website\\src\\components\\AdminUsers.vue","mtime":1589859231278},{"path":"C:\\Users\\joneb\\Documents\\GitHub\\cool-website\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\joneb\\Documents\\GitHub\\cool-website\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\joneb\\Documents\\GitHub\\cool-website\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\joneb\\Documents\\GitHub\\cool-website\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\joneb\\Documents\\GitHub\\cool-website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\joneb\\Documents\\GitHub\\cool-website\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCnRhYmxlLnYtdGFibGUgewogIG1heC13aWR0aDogbm9uZTsKfQo="},{"version":3,"sources":["AdminUsers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAylBA;AACA;AACA","file":"AdminUsers.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <v-data-table\n      :loading=\"dataTableLoading\"\n      :no-data-text=\"$t('dataTable.NO_DATA')\"\n      :no-results-text=\"$t('dataTable.NO_RESULTS')\"\n      :headers=\"headers\"\n      :items=\"items\"\n      :options.sync=\"pagination\"\n      :items-per-page=\"5\"\n      :server-items-length=\"totalItems\"\n      class=\"elevation-1\"\n      :footer-props=\"{\n        'items-per-page-text': $t('dataTable.ROWS_PER_PAGE'),\n        'items-per-page-options': [5, 10, 25]\n      }\"\n    >\n      <template v-slot:top>\n        <v-layout wrap>\n          <v-flex xs12 sm12 md4 mt-3 pl-4>\n            <div class=\"text-left\">\n              <v-toolbar-title>{{ $t('users.TITLE') }}</v-toolbar-title>\n            </div>\n          </v-flex>\n          <v-flex xs12 sm6 md4 px-3>\n            <v-text-field\n              v-model=\"search\"\n              append-icon=\"mdi-magnify\"\n              :label=\"$t('dataTable.SEARCH')\"\n              id=\"search\"\n              single-line\n              hide-details\n              clearable\n              clear-icon=\"mdi-close\"\n            ></v-text-field>\n          </v-flex>\n          <v-flex xs12 sm6 md4 text-xs-right mb-2 mt-2 pr-2>\n            <ValidationObserver\n              ref=\"observer\"\n              v-slot=\"{ invalid }\"\n              tag=\"form\"\n              @submit.prevent=\"submit()\"\n            >\n              <v-dialog\n                v-model=\"dialog\"\n                max-width=\"800px\"\n                content-class=\"dlgNewEditItem\"\n              >\n                <template v-slot:activator=\"{ on }\">\n                  <div class=\"text-right\">\n                    <v-btn color=\"secondary\" v-on=\"on\" class=\"btnNewItem pr-4\">\n                      <v-icon class=\"mr-2\">mdi-plus</v-icon>\n                      {{ $t('dataTable.NEW_ITEM') }}\n                    </v-btn>\n                  </div>\n                </template>\n                <v-card>\n                  <v-card-title>\n                    <span class=\"headline\">{{ formTitle }}</span>\n                  </v-card-title>\n                  <v-card-text>\n                    <v-container grid-list-md>\n                      <v-layout wrap>\n                        <template v-if=\"editedItem._id\">\n                          <v-flex xs12 md4>\n                            <label for=\"createdAt\">{{\n                              $t('common.CREATED')\n                            }}</label>\n                            <div name=\"createdAt\">\n                              {{ getFormat(editedItem.createdAt) }}\n                            </div>\n                          </v-flex>\n                          <v-flex xs12 md4>\n                            <label for=\"updatedAt\">{{\n                              $t('common.UPDATED')\n                            }}</label>\n                            <div name=\"updatedAt\">\n                              {{ getFormat(editedItem.updatedAt) }}\n                            </div>\n                          </v-flex>\n                          <v-flex xs12 md4>\n                            <label for=\"verified\">{{\n                              $t('users.headers.VERIFIED')\n                            }}</label>\n                            <div\n                              name=\"verified\"\n                              v-html=\"trueFalse(editedItem.verified)\"\n                            ></div>\n                          </v-flex>\n                        </template>\n                        <v-flex xs12 md6>\n                          <ValidationProvider\n                            rules=\"required\"\n                            v-slot=\"{ errors }\"\n                          >\n                            <v-text-field\n                              id=\"name\"\n                              name=\"name\"\n                              v-model=\"editedItem.name\"\n                              :label=\"$t('users.headers.NAME')\"\n                              :error=\"errors.length > 0\"\n                              :error-messages=\"errors[0]\"\n                              autocomplete=\"off\"\n                            ></v-text-field>\n                          </ValidationProvider>\n                        </v-flex>\n                        <v-flex xs12 md6>\n                          <ValidationProvider\n                            rules=\"required|email\"\n                            v-slot=\"{ errors }\"\n                          >\n                            <v-text-field\n                              id=\"email\"\n                              name=\"email\"\n                              type=\"email\"\n                              v-model=\"editedItem.email\"\n                              :label=\"$t('users.headers.EMAIL')\"\n                              :error=\"errors.length > 0\"\n                              :error-messages=\"errors[0]\"\n                              autocomplete=\"off\"\n                            ></v-text-field>\n                          </ValidationProvider>\n                        </v-flex>\n                        <template v-if=\"!editedItem._id\">\n                          <v-flex xs12 md6>\n                            <ValidationProvider\n                              rules=\"required|min:5\"\n                              v-slot=\"{ errors }\"\n                              vid=\"password\"\n                            >\n                              <v-text-field\n                                id=\"password\"\n                                name=\"password\"\n                                type=\"password\"\n                                :label=\"$t('users.PASSWORD')\"\n                                v-model=\"editedItem.password\"\n                                :error=\"errors.length > 0\"\n                                :error-messages=\"errors[0]\"\n                                key=\"password\"\n                                ref=\"password\"\n                                autocomplete=\"off\"\n                              ></v-text-field>\n                            </ValidationProvider>\n                          </v-flex>\n                          <v-flex xs12 md6>\n                            <ValidationProvider\n                              rules=\"required|min:5|confirmed:password\"\n                              v-slot=\"{ errors }\"\n                            >\n                              <v-text-field\n                                id=\"confirmPassword\"\n                                name=\"confirmPassword\"\n                                type=\"password\"\n                                :label=\"$t('users.CONFIRM_PASSWORD')\"\n                                v-model=\"editedItem.confirmPassword\"\n                                :error=\"errors.length > 0\"\n                                :error-messages=\"errors[0]\"\n                                key=\"confirmPassword\"\n                                autocomplete=\"off\"\n                              ></v-text-field>\n                            </ValidationProvider>\n                          </v-flex>\n                        </template>\n                        <v-flex xs12 md6>\n                          <ValidationProvider\n                            rules=\"required\"\n                            v-slot=\"{ errors }\"\n                          >\n                            <v-select\n                              clearable\n                              id=\"role\"\n                              name=\"role\"\n                              v-model=\"editedItem.role\"\n                              :items=\"roles\"\n                              item-text=\"name\"\n                              item-value=\"value\"\n                              :label=\"$t('users.headers.ROLE')\"\n                              :error=\"errors.length > 0\"\n                              :error-messages=\"errors[0]\"\n                              class=\"inputRole\"\n                            ></v-select>\n                          </ValidationProvider>\n                        </v-flex>\n                        <v-flex\n                          xs12\n                          md6\n                          v-if=\"\n                            editedItem.role === 'admin' ||\n                            editedItem.role === 'mentor'\n                              ? 'required'\n                              : ''\n                          \"\n                        >\n                          <ValidationProvider\n                            rules=\"required\"\n                            v-slot=\"{ errors }\"\n                          >\n                            <v-text-field\n                              id=\"uin\"\n                              name=\"uin\"\n                              type=\"tel\"\n                              v-model=\"editedItem.uin\"\n                              :label=\"$t('users.headers.UIN')\"\n                              :error=\"errors.length > 0\"\n                              :error-messages=\"errors[0]\"\n                              autocomplete=\"off\"\n                            ></v-text-field>\n                          </ValidationProvider>\n                        </v-flex>\n                        <v-flex\n                          xs12\n                          md6\n                          v-if=\"\n                            editedItem.role === 'admin' ||\n                            editedItem.role === 'mentor'\n                              ? 'required'\n                              : ''\n                          \"\n                        >\n                          <ValidationProvider\n                            rules=\"required\"\n                            v-slot=\"{ errors }\"\n                          >\n                            <v-text-field\n                              id=\"card\"\n                              name=\"card\"\n                              type=\"text\"\n                              v-model=\"editedItem.card\"\n                              :label=\"$t('users.headers.CARD')\"\n                              :error=\"errors.length > 0\"\n                              :error-messages=\"errors[0]\"\n                              autocomplete=\"off\"\n                            ></v-text-field>\n                          </ValidationProvider>\n                        </v-flex>\n                      </v-layout>\n                    </v-container>\n                  </v-card-text>\n\n                  <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn\n                      color=\"red lighten3\"\n                      text\n                      @click=\"close\"\n                      class=\"btnCancel\"\n                      >{{ $t('dataTable.CANCEL') }}</v-btn\n                    >\n                    <v-btn\n                      color=\"green\"\n                      text\n                      @click=\"save\"\n                      :disabled=\"invalid\"\n                      class=\"btnSave\"\n                      >{{ $t('dataTable.SAVE') }}</v-btn\n                    >\n                  </v-card-actions>\n                </v-card>\n              </v-dialog>\n            </ValidationObserver>\n          </v-flex>\n        </v-layout>\n      </template>\n      <template v-slot:items=\"props\">\n        <td>{{ props.item.name }}</td>\n        <td>{{ props.item.username }}</td>\n        <td>{{ props.item.email }}</td>\n        <td>{{ roleName(props.item.role) }}</td>\n        <td v-html=\"trueFalse(props.item.verified)\"></td>\n        <td>{{ props.item.uin }}</td>\n        <td>{{ props.item.card }}</td>\n      </template>\n      <template v-slot:item._id=\"{ item }\">\n        <td class=\"fill-height px-0\">\n          <v-layout class=\"justify-center\">\n            <v-tooltip top>\n              <template v-slot:activator=\"{ on }\">\n                <v-btn\n                  id=\"edit\"\n                  icon\n                  class=\"mx-0\"\n                  v-on=\"on\"\n                  @click=\"editItem(item)\"\n                >\n                  <v-icon>mdi-pencil</v-icon>\n                </v-btn>\n              </template>\n              <span>{{ $t('dataTable.EDIT') }}</span>\n            </v-tooltip>\n            <!-- <v-tooltip top>\n              <template v-slot:activator=\"{ scan }\">\n                <v-btn\n                  id=\"addCard\"\n                  icon\n                  class=\"mx-0\"\n                  v-on=\"scan\"\n                  @click=\"addCard(item)\"\n                >\n                  <v-icon>mdi-card-account-details</v-icon>\n                </v-btn>\n              </template>\n              <span>{{ $t('dataTable.ADDCARD') }}</span>\n            </v-tooltip> -->\n            <v-tooltip top>\n              <template v-slot:activator=\"{ on }\">\n                <v-btn\n                  id=\"delete\"\n                  icon\n                  class=\"mx-0\"\n                  v-on=\"on\"\n                  @click=\"deleteItem(item)\"\n                >\n                  <v-icon>mdi-delete</v-icon>\n                </v-btn>\n              </template>\n              <span>{{ $t('dataTable.DELETE') }}</span>\n            </v-tooltip>\n          </v-layout>\n        </td>\n      </template>\n      <template v-slot:item.createdAt=\"{ item }\">\n        {{ getFormat(item.createdAt) }}\n      </template>\n      <template v-slot:item.updatedAt=\"{ item }\">\n        {{ getFormat(item.updatedAt) }}\n      </template>\n      <template v-slot:footer.page-text=\"{ pageStart, pageStop, itemsLength }\">\n        {{ pageStart }} - {{ pageStop }}\n        {{ $t('dataTable.OF') }}\n        {{ itemsLength }}\n      </template>\n      <template v-slot:no-data>{{ $t('dataTable.NO_DATA') }}</template>\n      <template v-slot:no-results>{{ $t('dataTable.NO_RESULTS') }}</template>\n    </v-data-table>\n    <ErrorMessage />\n    <SuccessMessage />\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\nimport { getFormat, buildPayloadPagination } from '@/utils/utils.js'\n\nexport default {\n  metaInfo() {\n    return {\n      title: this.$store.getters.appTitle,\n      titleTemplate: `${this.$t('users.TITLE')} - %s`\n    }\n  },\n  data() {\n    return {\n      searchInput: '',\n      dataTableLoading: true,\n      delayTimer: null,\n      dialog: false,\n      search: '',\n      pagination: {},\n      editedItem: {},\n      defaultItem: {},\n      fieldsToSearch: ['name', 'username', 'email', 'role', 'uin', 'card']\n    }\n  },\n  computed: {\n    roles() {\n      return [\n        { name: this.$t('roles.ADMIN'), value: 'admin' },\n        { name: this.$t('roles.USER'), value: 'user' },\n        { name: this.$t('roles.MENTOR'), value: 'mentor' },\n        { name: this.$t('roles.MENTEE'), value: 'mentee' }\n      ]\n    },\n    allCities() {\n      return this.$store.state.cities.allCities\n    },\n    isMentorOrAdmin(role) {\n      return role === 'user' || role === 'mentor' ? 'required' : ''\n    },\n    formTitle() {\n      return this.editedItem._id\n        ? this.$t('dataTable.EDIT_ITEM')\n        : this.$t('dataTable.NEW_ITEM')\n    },\n    headers() {\n      return [\n        {\n          text: this.$i18n.t('dataTable.ACTIONS'),\n          value: '_id',\n          sortable: false,\n          width: 100\n        },\n        {\n          text: this.$i18n.t('users.headers.NAME'),\n          align: 'left',\n          sortable: true,\n          value: 'name'\n        },\n        {\n          text: this.$i18n.t('users.headers.USERNAME'),\n          align: 'left',\n          sortable: true,\n          value: 'username'\n        },\n        {\n          text: this.$i18n.t('users.headers.EMAIL'),\n          align: 'left',\n          sortable: true,\n          value: 'email'\n        },\n        {\n          text: this.$i18n.t('users.headers.ROLE'),\n          align: 'left',\n          sortable: true,\n          value: 'role'\n        },\n        {\n          text: this.$i18n.t('users.headers.VERIFIED'),\n          align: 'left',\n          sortable: true,\n          value: 'verified'\n        },\n        {\n          text: this.$i18n.t('users.headers.UIN'),\n          align: 'left',\n          sortable: true,\n          value: 'uin'\n        },\n        // {\n        //   text: this.$i18n.t('users.headers.CARD'),\n        //   align: 'left',\n        //   sortable: true,\n        //   value: 'card'\n        // },\n        {\n          text: this.$i18n.t('common.CREATED'),\n          align: 'left',\n          sortable: true,\n          value: 'createdAt'\n        },\n        {\n          text: this.$i18n.t('common.UPDATED'),\n          align: 'left',\n          sortable: true,\n          value: 'updatedAt'\n        }\n      ]\n    },\n    items() {\n      return this.$store.state.adminUsers.users\n    },\n    totalItems() {\n      return this.$store.state.adminUsers.totalUsers\n    }\n  },\n  watch: {\n    dialog(value) {\n      return value ? true : this.close()\n    },\n    pagination: {\n      async handler() {\n        try {\n          this.dataTableLoading = true\n          await this.getUsers(\n            buildPayloadPagination(this.pagination, this.buildSearch())\n          )\n          this.dataTableLoading = false\n          // eslint-disable-next-line no-unused-vars\n        } catch (error) {\n          this.dataTableLoading = false\n        }\n      },\n      deep: true\n    },\n    search() {\n      clearTimeout(this.delayTimer)\n      this.delayTimer = setTimeout(() => {\n        this.doSearch()\n      }, 400)\n    }\n  },\n  methods: {\n    ...mapActions([\n      'getAllCities',\n      'getUsers',\n      'editUser',\n      'saveUser',\n      'deleteUser'\n    ]),\n    getFormat(date) {\n      window.__localeId__ = this.$store.getters.locale\n      return getFormat(date, 'iii, MMMM d yyyy, h:mm a')\n    },\n    roleName(value) {\n      return value === 'admin' ? this.$t('roles.ADMIN') : this.$t('roles.USER')\n    },\n    trueFalse(value) {\n      return value\n        ? '<i aria-hidden=\"true\" class=\"v-icon mdi mdi-check green--text\" style=\"font-size: 16px;\"></i>'\n        : '<i aria-hidden=\"true\" class=\"v-icon mdi mdi-close red--text\" style=\"font-size: 16px;\"></i>'\n    },\n    async doSearch() {\n      try {\n        this.dataTableLoading = true\n        await this.getUsers(\n          buildPayloadPagination(this.pagination, this.buildSearch())\n        )\n        this.dataTableLoading = false\n        // eslint-disable-next-line no-unused-vars\n      } catch (error) {\n        this.dataTableLoading = false\n      }\n    },\n    buildSearch() {\n      return this.search\n        ? { query: this.search, fields: this.fieldsToSearch.join(',') }\n        : {}\n    },\n    editItem(item) {\n      this.editedItem = Object.assign({}, item)\n      this.dialog = true\n    },\n    addCard(item) {\n      this.editedItem = Object.assign({}, item)\n      this.dialog = true\n    },\n    async deleteItem(item) {\n      try {\n        const response = await this.$confirm(\n          this.$t('common.DO_YOU_REALLY_WANT_TO_DELETE_THIS_ITEM'),\n          {\n            title: this.$t('common.WARNING'),\n            buttonTrueText: this.$t('common.DELETE'),\n            buttonFalseText: this.$t('common.CANCEL'),\n            buttonTrueColor: 'red lighten3',\n            buttonFalseColor: 'yellow'\n          }\n        )\n        if (response) {\n          this.dataTableLoading = true\n          await this.deleteUser(item._id)\n          await this.getUsers(\n            buildPayloadPagination(this.pagination, this.buildSearch())\n          )\n          this.dataTableLoading = false\n        }\n        // eslint-disable-next-line no-unused-vars\n      } catch (error) {\n        this.dataTableLoading = false\n      }\n    },\n    close() {\n      this.dialog = false\n      setTimeout(() => {\n        this.editedItem = Object.assign({}, this.defaultItem)\n      }, 300)\n    },\n    async save() {\n      try {\n        this.dataTableLoading = true\n        // Updating item\n        if (this.editedItem._id) {\n          await this.editUser(this.editedItem)\n          await this.getUsers(\n            buildPayloadPagination(this.pagination, this.buildSearch())\n          )\n          this.dataTableLoading = false\n        } else {\n          // Creating new item\n          await this.saveUser({\n            name: this.editedItem.name,\n            email: this.editedItem.email,\n            username: this.editedItem.username,\n            password: this.editedItem.password,\n            role: this.editedItem.role,\n            phone: this.editedItem.phone,\n            city: this.editedItem.city,\n            country: this.editedItem.country,\n            card: this.editedItem.card,\n            uin: this.editedItem.uin\n          })\n          await this.getUsers(\n            buildPayloadPagination(this.pagination, this.buildSearch())\n          )\n          this.dataTableLoading = false\n        }\n        this.close()\n        return\n        // eslint-disable-next-line no-unused-vars\n      } catch (error) {\n        this.dataTableLoading = false\n        this.close()\n      }\n    }\n  },\n  async mounted() {\n    await this.getAllCities()\n  }\n}\n</script>\n\n<style>\ntable.v-table {\n  max-width: none;\n}\n</style>\n"]}]}